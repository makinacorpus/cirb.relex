<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xml:lang="en" lang="en"
      i18n:domain="cirb.relex"
      metal:use-macro="here/main_template/macros/master">
  <head><title></title></head>
  <body>
    <metal:content-core fill-slot="content-core">

      <div id="filters_table">
        <h2>Filters</h2>
        <dl>
          <dt><label for="filter-code">Code</label></dt>
          <dd><input type="text" id="filter-code" data-column="0" /></dd>
        </dl>
      </div>

      <table id="projects_table">
        <thead>
          <tr>
            <th><span i18n:translate="">Code</span></th>
            <th><span i18n:translate="">Name</span></th>
          </tr>
        </thead>

        <tbody>
          <tal:block tal:repeat="project view/getProjects">
            <tr tal:define="project project/getObject">
              <td><a tal:attributes="href project/absolute_url" tal:content="project/getCode"></a></td>
              <td tal:content="python:view.getName(project)"></td>
            </tr>
          </tal:block>
        </tbody>

      </table>

      <script>
        var table = $('#projects_table').dataTable({
            "bLengthChange": false,
            // "sPaginationType": "full_numbers",
            "iDisplayLength": -1,
        });
        $('#filters_table input').keyup(function(i){
            var col = $(this).attr('data-column');
            table.fnFilter(this.value, col);
        });
      </script>

    </metal:content-core>
  </body>
</html>
